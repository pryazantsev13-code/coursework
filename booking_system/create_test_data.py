import os
import django
from datetime import date, timedelta, datetime
import random
from django.utils import timezone

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'booking_system.settings')
django.setup()

from bookings.models import Category, Service, TimeSlot, Booking, Review
from django.contrib.auth.models import User

def create_test_data():
    print("–°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö...")
    
    # –°–æ–∑–¥–∞–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º–∏ –æ–ø–∏—Å–∞–Ω–∏—è–º–∏
    categories_data = [
        {
            'name': '–ü–∞—Ä–∏–∫–º–∞—Ö–µ—Ä—Å–∫–∏–µ —É—Å–ª—É–≥–∏', 
            'description': '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–∏–∂–∫–∏, –æ–∫—Ä–∞—à–∏–≤–∞–Ω–∏–µ, —É–∫–ª–∞–¥–∫–∏ –∏ –ª–µ—á–µ–Ω–∏–µ –≤–æ–ª–æ—Å. –†–∞–±–æ—Ç–∞–µ–º —Å –ª—é–±—ã–º —Ç–∏–ø–æ–º –≤–æ–ª–æ—Å –∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è–º–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤.'
        },
        {
            'name': '–°–ø–∞ –∏ —É—Ö–æ–¥ –∑–∞ –ª–∏—Ü–æ–º', 
            'description': '–†–∞—Å—Å–ª–∞–±–ª—è—é—â–∏–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –¥–ª—è –ª–∏—Ü–∞, —á–∏—Å—Ç–∫–∏, –ø–∏–ª–∏–Ω–≥–∏ –∏ –æ–º–æ–ª–∞–∂–∏–≤–∞—é—â–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã. –í–µ—Ä–Ω–µ–º –∫–æ–∂–µ —Å–∏—è–Ω–∏–µ –∏ –∑–¥–æ—Ä–æ–≤—å–µ.'
        },
        {
            'name': '–ú–∞—Å—Å–∞–∂', 
            'description': '–†–∞–∑–ª–∏—á–Ω—ã–µ –≤–∏–¥—ã –º–∞—Å—Å–∞–∂–∞: –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π, —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–π, —Ä–µ–ª–∞–∫—Å. –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –º–∞—Å—Å–∞–∂–∏—Å—Ç—ã —Å –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–º –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ–º.'
        },
        {
            'name': '–ú–∞–Ω–∏–∫—é—Ä –∏ –ø–µ–¥–∏–∫—é—Ä', 
            'description': '–£—Ö–æ–¥ –∑–∞ –Ω–æ–≥—Ç—è–º–∏, –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–π –∏ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –º–∞–Ω–∏–∫—é—Ä, –ø–æ–∫—Ä—ã—Ç–∏–µ –≥–µ–ª—å-–ª–∞–∫–æ–º, –Ω–∞—Ä–∞—â–∏–≤–∞–Ω–∏–µ –Ω–æ–≥—Ç–µ–π.'
        },
        {
            'name': '–ö–æ—Å–º–µ—Ç–æ–ª–æ–≥–∏—è', 
            'description': '–ê–ø–ø–∞—Ä–∞—Ç–Ω–∞—è –∫–æ—Å–º–µ—Ç–æ–ª–æ–≥–∏—è, –∏–Ω—ä–µ–∫—Ü–∏–æ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥–∏–∫–∏, —É—Ö–æ–¥–æ–≤—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã. –°–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ—Å–º–µ—Ç–æ–ª–æ–≥–∏.'
        },
        {
            'name': '–ë—Ä–æ–≤–∏ –∏ —Ä–µ—Å–Ω–∏—Ü—ã', 
            'description': '–ö–æ—Ä—Ä–µ–∫—Ü–∏—è –∏ –æ–∫—Ä–∞—à–∏–≤–∞–Ω–∏–µ –±—Ä–æ–≤–µ–π, –ª–∞–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –Ω–∞—Ä–∞—â–∏–≤–∞–Ω–∏–µ —Ä–µ—Å–Ω–∏—Ü. –°–æ–∑–¥–∞–¥–∏–º –∏–¥–µ–∞–ª—å–Ω—ã–π –≤–∑–≥–ª—è–¥.'
        }
    ]
    
    categories = {}
    for cat_data in categories_data:
        category, created = Category.objects.get_or_create(
            name=cat_data['name'],
            defaults={'description': cat_data['description']}
        )
        categories[cat_data['name']] = category
        if created:
            print(f"‚úì –°–æ–∑–¥–∞–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è: {cat_data['name']}")
    
    # –°–æ–∑–¥–∞–µ–º —É—Å–ª—É–≥–∏ —Å —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–º–∏ —Ü–µ–Ω–∞–º–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏—è–º–∏
    services_data = [
        # –ü–∞—Ä–∏–∫–º–∞—Ö–µ—Ä—Å–∫–∏–µ —É—Å–ª—É–≥–∏
        {
            'category': '–ü–∞—Ä–∏–∫–º–∞—Ö–µ—Ä—Å–∫–∏–µ —É—Å–ª—É–≥–∏', 
            'name': '–ñ–µ–Ω—Å–∫–∞—è —Å—Ç—Ä–∏–∂–∫–∞', 
            'price': 1800, 
            'duration': 60,
            'description': '–°—Ç—Ä–∏–∂–∫–∞ —Å —É—á–µ—Ç–æ–º –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π –≤–∞—à–µ–≥–æ —Ç–∏–ø–∞ –≤–æ–ª–æ—Å –∏ —Ñ–æ—Ä–º—ã –ª–∏—Ü–∞. –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —Å—Ç–∏–ª–∏—Å—Ç–∞ –≤–∫–ª—é—á–µ–Ω–∞.'
        },
        {
            'category': '–ü–∞—Ä–∏–∫–º–∞—Ö–µ—Ä—Å–∫–∏–µ —É—Å–ª—É–≥–∏', 
            'name': '–ú—É–∂—Å–∫–∞—è —Å—Ç—Ä–∏–∂–∫–∞', 
            'price': 900, 
            'duration': 40,
            'description': '–°—Ç—Ä–∏–∂–∫–∞ –º–∞—à–∏–Ω–∫–æ–π –∏ –Ω–æ–∂–Ω–∏—Ü–∞–º–∏, –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –±–æ—Ä–æ–¥—ã –∏ —É—Å–æ–≤. –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è —É–∫–ª–∞–¥–∫–∞.'
        },
        {
            'category': '–ü–∞—Ä–∏–∫–º–∞—Ö–µ—Ä—Å–∫–∏–µ —É—Å–ª—É–≥–∏', 
            'name': '–û–∫—Ä–∞—à–∏–≤–∞–Ω–∏–µ –≤–æ–ª–æ—Å', 
            'price': 3200, 
            'duration': 120,
            'description': '–°—Ç–æ–π–∫–æ–µ –æ–∫—Ä–∞—à–∏–≤–∞–Ω–∏–µ –ø—Ä–µ–º–∏–∞–ª—å–Ω—ã–º–∏ –∫—Ä–∞—Å–∫–∞–º–∏. –ü–æ–¥–±–æ—Ä –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–≥–æ –æ—Ç—Ç–µ–Ω–∫–∞.'
        },
        {
            'category': '–ü–∞—Ä–∏–∫–º–∞—Ö–µ—Ä—Å–∫–∏–µ —É—Å–ª—É–≥–∏', 
            'name': '–ú–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ', 
            'price': 4500, 
            'duration': 180,
            'description': '–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–µ –∏–ª–∏ —à–∞—Ç—É—à –º–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ. –ò—Å–ø–æ–ª—å–∑—É–µ–º —â–∞–¥—è—â–∏–µ —Å–æ—Å—Ç–∞–≤—ã.'
        },
        {
            'category': '–ü–∞—Ä–∏–∫–º–∞—Ö–µ—Ä—Å–∫–∏–µ —É—Å–ª—É–≥–∏', 
            'name': '–£–∫–ª–∞–¥–∫–∞', 
            'price': 1200, 
            'duration': 45,
            'description': '–í–µ—á–µ—Ä–Ω—è—è –∏–ª–∏ —Å–≤–∞–¥–µ–±–Ω–∞—è —É–∫–ª–∞–¥–∫–∞. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ–±—ä–µ–º–∞ –Ω–∞ –≤–µ—Å—å –¥–µ–Ω—å.'
        },
        
        # –°–ø–∞ –∏ —É—Ö–æ–¥ –∑–∞ –ª–∏—Ü–æ–º
        {
            'category': '–°–ø–∞ –∏ —É—Ö–æ–¥ –∑–∞ –ª–∏—Ü–æ–º', 
            'name': '–ß–∏—Å—Ç–∫–∞ –ª–∏—Ü–∞', 
            'price': 2500, 
            'duration': 60,
            'description': '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —á–∏—Å—Ç–∫–∞ –ª–∏—Ü–∞ —Å —Ä–∞—Å–ø–∞—Ä–∏–≤–∞–Ω–∏–µ–º. –£—Ö–æ–¥ –ø–æ—Å–ª–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã.'
        },
        {
            'category': '–°–ø–∞ –∏ —É—Ö–æ–¥ –∑–∞ –ª–∏—Ü–æ–º', 
            'name': 'SPA-–ø—Ä–æ–≥—Ä–∞–º–º–∞ "–†–µ–ª–∞–∫—Å"', 
            'price': 4200, 
            'duration': 90,
            'description': '–†–∞—Å—Å–ª–∞–±–ª—è—é—â–∏–π —É—Ö–æ–¥ –¥–ª—è –ª–∏—Ü–∞ –∏ –∑–æ–Ω—ã –¥–µ–∫–æ–ª—å—Ç–µ. –ê—Ä–æ–º–∞—Ç–µ—Ä–∞–ø–∏—è –≤–∫–ª—é—á–µ–Ω–∞.'
        },
        
        # –ú–∞—Å—Å–∞–∂
        {
            'category': '–ú–∞—Å—Å–∞–∂', 
            'name': '–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –º–∞—Å—Å–∞–∂', 
            'price': 2200, 
            'duration': 60,
            'description': '–û–±—â–∏–π —Ä–∞—Å—Å–ª–∞–±–ª—è—é—â–∏–π –º–∞—Å—Å–∞–∂ –≤—Å–µ–≥–æ —Ç–µ–ª–∞. –°–Ω–∏–º–∞–µ—Ç –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –∏ —É—Å—Ç–∞–ª–æ—Å—Ç—å.'
        },
        {
            'category': '–ú–∞—Å—Å–∞–∂', 
            'name': '–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–π –º–∞—Å—Å–∞–∂', 
            'price': 2800, 
            'duration': 60,
            'description': '–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–π –º–∞—Å—Å–∞–∂ –¥–ª—è —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–æ–≤. –†–∞–∑–æ–≥—Ä–µ–≤ –º—ã—à—Ü –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ.'
        },
        {
            'category': '–ú–∞—Å—Å–∞–∂', 
            'name': '–ê–Ω—Ç–∏—Ü–µ–ª–ª—é–ª–∏—Ç–Ω—ã–π –º–∞—Å—Å–∞–∂', 
            'price': 1900, 
            'duration': 45,
            'description': '–õ–∏–º—Ñ–æ–¥—Ä–µ–Ω–∞–∂–Ω—ã–π –º–∞—Å—Å–∞–∂ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –∑–æ–Ω. –ö—É—Ä—Å –∏–∑ 10 –ø—Ä–æ—Ü–µ–¥—É—Ä.'
        },
        
        # –ú–∞–Ω–∏–∫—é—Ä –∏ –ø–µ–¥–∏–∫—é—Ä
        {
            'category': '–ú–∞–Ω–∏–∫—é—Ä –∏ –ø–µ–¥–∏–∫—é—Ä', 
            'name': '–ú–∞–Ω–∏–∫—é—Ä –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π', 
            'price': 1500, 
            'duration': 60,
            'description': '–û–±—Ä–µ–∑–Ω–æ–π –º–∞–Ω–∏–∫—é—Ä —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∫—É—Ç–∏–∫—É–ª—ã. –í–∫–ª—é—á–∞–µ—Ç –º–∞—Å—Å–∞–∂ —Ä—É–∫.'
        },
        {
            'category': '–ú–∞–Ω–∏–∫—é—Ä –∏ –ø–µ–¥–∏–∫—é—Ä', 
            'name': '–ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–π –º–∞–Ω–∏–∫—é—Ä', 
            'price': 1700, 
            'duration': 60,
            'description': '–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –º–∞–Ω–∏–∫—é—Ä –∞–ø–ø–∞—Ä–∞—Ç–æ–º. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è —Ç–æ–Ω–∫–æ–π –∫–æ–∂–∏.'
        },
        {
            'category': '–ú–∞–Ω–∏–∫—é—Ä –∏ –ø–µ–¥–∏–∫—é—Ä', 
            'name': '–ü–µ–¥–∏–∫—é—Ä –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π', 
            'price': 2200, 
            'duration': 75,
            'description': '–£—Ö–æ–¥ –∑–∞ —Å—Ç–æ–ø–∞–º–∏ –∏ –Ω–æ–≥—Ç—è–º–∏ –Ω–æ–≥. –û–±—Ä–∞–±–æ—Ç–∫–∞ –º–æ–∑–æ–ª–µ–π –∏ –Ω–∞—Ç–æ–ø—Ç—ã—à–µ–π.'
        },
        
        # –ö–æ—Å–º–µ—Ç–æ–ª–æ–≥–∏—è
        {
            'category': '–ö–æ—Å–º–µ—Ç–æ–ª–æ–≥–∏—è', 
            'name': '–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –∫–æ—Å–º–µ—Ç–æ–ª–æ–≥–∞', 
            'price': 1000, 
            'duration': 30,
            'description': '–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–æ–∂–∏ –∏ –ø–æ–¥–±–æ—Ä –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–≥–æ —É—Ö–æ–¥–∞. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞.'
        },
        
        # –ë—Ä–æ–≤–∏ –∏ —Ä–µ—Å–Ω–∏—Ü—ã
        {
            'category': '–ë—Ä–æ–≤–∏ –∏ —Ä–µ—Å–Ω–∏—Ü—ã', 
            'name': '–ö–æ—Ä—Ä–µ–∫—Ü–∏—è –∏ –æ–∫—Ä–∞—à–∏–≤–∞–Ω–∏–µ –±—Ä–æ–≤–µ–π', 
            'price': 800, 
            'duration': 30,
            'description': '–ü—Ä–∏–¥–∞–Ω–∏–µ —Ñ–æ—Ä–º—ã –∏ –æ–∫—Ä–∞—à–∏–≤–∞–Ω–∏–µ –∫—Ä–∞—Å–∫–æ–π –∏–ª–∏ —Ö–Ω–æ–π. –î–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —É–∫–ª–∞–¥–∫–∞.'
        }
    ]
    
    services = {}
    for service_data in services_data:
        service, created = Service.objects.get_or_create(
            name=service_data['name'],
            defaults={
                'category': categories[service_data['category']],
                'description': service_data['description'],
                'price': service_data['price'],
                'duration': service_data['duration']
            }
        )
        services[service_data['name']] = service
        if created:
            print(f"‚úì –°–æ–∑–¥–∞–Ω–∞ —É—Å–ª—É–≥–∞: {service_data['name']} - {service_data['price']} —Ä—É–±.")
    
        # –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã –Ω–∞ 2 –Ω–µ–¥–µ–ª–∏ –≤–ø–µ—Ä–µ–¥
    print("\n–°–æ–∑–¥–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤...")
    today = date.today()
    
    for service in services.values():
        for day_offset in range(14):  # 2 –Ω–µ–¥–µ–ª–∏
            slot_date = today + timedelta(days=day_offset)
            
            # –†–∞–∑–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –±—É–¥–Ω–µ–π –∏ –≤—ã—Ö–æ–¥–Ω—ã—Ö
            if slot_date.weekday() < 5:  # –ë—É–¥–Ω–∏
                time_slots = [
                    ('09:00', '10:00'), ('10:00', '11:00'), ('11:00', '12:00'),
                    ('12:00', '13:00'), ('13:00', '14:00'), ('14:00', '15:00'),
                    ('15:00', '16:00'), ('16:00', '17:00'), ('17:00', '18:00'),
                    ('18:00', '19:00'), ('19:00', '20:00')
                ]
            else:  # –í—ã—Ö–æ–¥–Ω—ã–µ
                time_slots = [
                    ('10:00', '11:00'), ('11:00', '12:00'), ('12:00', '13:00'),
                    ('13:00', '14:00'), ('14:00', '15:00'), ('15:00', '16:00'),
                    ('16:00', '17:00'), ('17:00', '18:00')
                ]
            
            for start_time, end_time in time_slots:
                # –°–ª—É—á–∞–π–Ω–æ –¥–µ–ª–∞–µ–º –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–ª–æ—Ç—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ (20% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏)
                is_available = random.random() > 0.2
                
                TimeSlot.objects.get_or_create(
                    service=service,
                    date=slot_date,
                    start_time=start_time,
                    end_time=end_time,
                    defaults={'is_available': is_available}
                )
    
    print(f"‚úì –°–æ–∑–¥–∞–Ω—ã –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã –Ω–∞ 2 –Ω–µ–¥–µ–ª–∏")
    
    # –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
    print("\n–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π...")
    
    # –ü–æ–ª—É—á–∞–µ–º –∏–ª–∏ —Å–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    try:
        test_user = User.objects.get(username='testuser')
        client1 = User.objects.get(username='client1')
        client2 = User.objects.get(username='client2')
    except User.DoesNotExist:
        print("‚ö† –¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ó–∞–ø—É—Å—Ç–∏—Ç–µ setup_permissions.py —Å–Ω–∞—á–∞–ª–∞.")
        return
    
    users = [test_user, client1, client2]
    statuses = ['pending', 'confirmed', 'completed', 'cancelled']
    
    # –ë–µ—Ä–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–ª–æ—Ç—ã –∏ –¥–µ–ª–∞–µ–º –∏—Ö –∑–∞–Ω—è—Ç—ã–º–∏ –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
    available_slots = TimeSlot.objects.filter(is_available=True, is_blocked=False)[:30]
    
    booking_count = 0
    for i, time_slot in enumerate(available_slots):
        user = users[i % len(users)]
        status = statuses[i % len(statuses)]
        
        # –°–æ–∑–¥–∞–µ–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
        booking, created = Booking.objects.get_or_create(
            user=user,
            service=time_slot.service,
            time_slot=time_slot,
            defaults={
                'status': status,
                'notes': f'–¢–µ—Å—Ç–æ–≤–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ #{i+1}',
            }
        )
        
        if created:
            # –ü–æ–º–µ—á–∞–µ–º —Å–ª–æ—Ç –∫–∞–∫ –∑–∞–Ω—è—Ç—ã–π
            time_slot.is_available = False
            time_slot.save()
            booking_count += 1
    
    print(f"‚úì –°–æ–∑–¥–∞–Ω–æ {booking_count} —Ç–µ—Å—Ç–æ–≤—ã—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π")
    
    # –°–æ–∑–¥–∞–µ–º –æ—Ç–∑—ã–≤—ã –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
    print("\n–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –æ—Ç–∑—ã–≤–æ–≤...")
    
    completed_bookings = Booking.objects.filter(status='completed')
    reviews_text = [
        {
            'rating': 5,
            'comment': '–û—Ç–ª–∏—á–Ω—ã–π —Å–µ—Ä–≤–∏—Å! –ú–∞—Å—Ç–µ—Ä - –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª —Å–≤–æ–µ–≥–æ –¥–µ–ª–∞. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤–µ—Ä–Ω—É—Å—å –µ—â–µ.'
        },
        {
            'rating': 4,
            'comment': '–•–æ—Ä–æ—à–µ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ, –ø—Ä–∏—è—Ç–Ω–∞—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞. –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏.'
        },
        {
            'rating': 5,
            'comment': '–ü—Ä–µ–∫—Ä–∞—Å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –†–µ–∫–æ–º–µ–Ω–¥—É—é –≤—Å–µ–º –∑–Ω–∞–∫–æ–º—ã–º. –°–ø–∞—Å–∏–±–æ –∑–∞ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—É—é —Ä–∞–±–æ—Ç—É!'
        },
        {
            'rating': 3,
            'comment': '–ù–æ—Ä–º–∞–ª—å–Ω–æ, –Ω–æ –æ–∂–∏–¥–∞–ª –±–æ–ª—å—à–µ–≥–æ –∑–∞ —Ç–∞–∫—É—é —Ü–µ–Ω—É. –ü–µ—Ä—Å–æ–Ω–∞–ª –≤–µ–∂–ª–∏–≤—ã–π.'
        },
        {
            'rating': 5,
            'comment': '–õ—É—á—à–∏–π —Å–∞–ª–æ–Ω –≤ –≥–æ—Ä–æ–¥–µ! –ü–æ—Å—Ç–æ—è–Ω–Ω–æ —Ö–æ–∂—É —Å—é–¥–∞, –≤—Å–µ–≥–¥–∞ –¥–æ–≤–æ–ª–µ–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º.'
        },
        {
            'rating': 4,
            'comment': '–£–¥–æ–±–Ω–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ, —á–∏—Å—Ç–æ—Ç–∞, –≤–µ–∂–ª–∏–≤—ã–π –ø–µ—Ä—Å–æ–Ω–∞–ª. –ë—É–¥—É —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞—Ç—å.'
        },
        {
            'rating': 2,
            'comment': '–ù–µ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ. –ú–∞—Å—Ç–µ—Ä –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –æ—Ç–≤–ª–µ–∫–∞–ª—Å—è –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω.'
        },
        {
            'rating': 5,
            'comment': '–í–µ–ª–∏–∫–æ–ª–µ–ø–Ω–æ! –ü—Ä–µ–≤–∑–æ—à–ª–∏ –≤—Å–µ –æ–∂–∏–¥–∞–Ω–∏—è. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–∏–¥—É –µ—â–µ.'
        },
        {
            'rating': 4,
            'comment': '–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã, –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã–π –º–∞—Å—Ç–µ—Ä. –ü—Ä–∏—è—Ç–Ω–∞—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞ –≤ —Å–∞–ª–æ–Ω–µ.'
        },
        {
            'rating': 5,
            'comment': '–û—á–µ–Ω—å –¥–æ–≤–æ–ª–µ–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º! –¶–µ–Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∫–∞—á–µ—Å—Ç–≤—É. –°–ø–∞—Å–∏–±–æ!'
        }
    ]
    
    review_count = 0
    for i, booking in enumerate(completed_bookings):
        if i < len(reviews_text):
            review, created = Review.objects.get_or_create(
                booking=booking,
                defaults={
                    'rating': reviews_text[i]['rating'],
                    'comment': reviews_text[i]['comment'],
                    'created_at': timezone.now() - timedelta(days=random.randint(1, 30))
                }
            )
            if created:
                review_count += 1
    
    print(f"‚úì –°–æ–∑–¥–∞–Ω–æ {review_count} —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤")
    
    # –°–æ–∑–¥–∞–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤
    print("\n–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤...")
    
    future_time_slots = TimeSlot.objects.filter(
        date__gte=today + timedelta(days=3),
        is_available=True,
        is_blocked=False
    )[:15]
    
    block_reasons = [
        '–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–∞–±–æ—Ç—ã',
        '–í—ã—Ö–æ–¥–Ω–æ–π –º–∞—Å—Ç–µ—Ä–∞',
        '–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ',
        '–°–∞–Ω–∏—Ç–∞—Ä–Ω—ã–π –¥–µ–Ω—å',
        '–û–±—É—á–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞',
        '–†–µ–º–æ–Ω—Ç –ø–æ–º–µ—â–µ–Ω–∏—è',
        '–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π –æ—Å–º–æ—Ç—Ä'
    ]
    
    blocked_count = 0
    for time_slot in future_time_slots:
        time_slot.is_blocked = True
        time_slot.is_available = False
        time_slot.block_reason = random.choice(block_reasons)
        time_slot.blocked_at = timezone.now()
        time_slot.save()
        blocked_count += 1
    
    print(f"‚úì –°–æ–∑–¥–∞–Ω–æ {blocked_count} –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤")
    
    # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    print("\n" + "="*50)
    print("üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –°–û–ó–î–ê–ù–ù–´–• –î–ê–ù–ù–´–•:")
    print(f"   –ö–∞—Ç–µ–≥–æ—Ä–∏–∏: {Category.objects.count()}")
    print(f"   –£—Å–ª—É–≥–∏: {Service.objects.count()}")
    print(f"   –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã: {TimeSlot.objects.count()}")
    print(f"   –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è: {Booking.objects.count()}")
    print(f"   –û—Ç–∑—ã–≤—ã: {Review.objects.count()}")
    
    # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
    print("\nüìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π:")
    for status in ['pending', 'confirmed', 'completed', 'cancelled']:
        count = Booking.objects.filter(status=status).count()
        print(f"   - {status}: {count}")
    
    print("="*50)
    print("\n‚úÖ –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω—ã!")
    print("\nüí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:")
    print("   - –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä: python manage.py runserver")
    print("   - –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ manager / manager123 –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è")
    print("   - –ò–ª–∏ –∫–∞–∫ admin / admin123 –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è")
    print("   - –¢–µ—Å—Ç–æ–≤—ã–µ –∫–ª–∏–µ–Ω—Ç—ã: testuser / testpass123, client1 / client123, client2 / client123")

if __name__ == '__main__':
    create_test_data()